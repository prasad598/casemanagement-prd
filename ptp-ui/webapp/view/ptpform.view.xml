<mvc:View
    controllerName="com.stengg.btp.ptpui.controller.ptpform"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:u="sap.uxap"
    xmlns:tnt="sap.tnt"
>
    <NavContainer
        id="notificationNav"
        height="100%"
        width="100%"
    >
        <Page
            id="searchPage"
            title="{i18n>title}" showHeader="false"
        >
            <Table
                id="All"
                inset="false"
                itemPress="onPressViewRequest"
                items="{ path: 'RequestorInfo>/requestList', sorter: { path: 'createdDate',descending: true} }"
            >
                <headerToolbar>
                    <OverflowToolbar>
                        <content>
                            <Title
                                text="{i18n>title}"
                                level="H2"
                            />
                            <ToolbarSpacer />
                            <Button
                                icon="sap-icon://refresh"
                                class="sapUiSmallMarginBottom"
                                text=""
                                press="onRefreshButtonPress"
                                type="Default"
                            />
                        </content>
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Service Request Number" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Service Request Category" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                    >
                        <Text text="Entity Name" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                    >
                        <Text text="Vendor Name" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Created Date" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Status" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text text="Priority" />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        width="3em"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        width="3em"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        width="3em"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        width="3em"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text />
                    </Column>
                    <Column
                        minScreenWidth="Tablet"
                        width="3em"
                        demandPopin="true"
                        hAlign="Center"
                    >
                        <Text />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem
                        type="Active"
                        press="onSelectRequest"
                    >
                        <cells>
                            <ObjectIdentifier
                                title="{RequestorInfo>draftDisplay}" textDirection="LTR" 
                            />
                            <Text text="{RequestorInfo>srCategoryDesp}" />
                            <Text text="{RequestorInfo>entityName}" />
                            <Text text="{RequestorInfo>vendorName}" />
                            <Text
                                text="{RequestorInfo>submissionDateDisplay}"
                            />
                            <tnt:InfoLabel
                                text="{RequestorInfo>srStatusDesp}"
                                tooltip="{RequestorInfo>srStatusDesp}"
                                colorScheme="{RequestorInfo>statusColorScheme}"
                                wrapping="false"
                                displayOnly="true"
                            />

                            <Text text="{RequestorInfo>priorityDesc}" />
                            <Button
                                icon="sap-icon://edit"
                                tooltip="Provide Clarification"
                                visible="{RequestorInfo>isClarificationReq}"
                                press="editDraftRequest"
                                type="Transparent"
                            >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                                <customData>
                                    <core:CustomData
                                        key="target"
                                        value="resolutionCreate"
                                    />
                                    <core:CustomData
                                        key="actionSource"
                                        value="LandingPage"
                                    />
                                </customData>
                            </Button>
                            <Button
                                icon="sap-icon://accept"
                                tooltip="Close/Open Case"
                                visible="{RequestorInfo>isPendingClose}"
                                press="editCloseCase"
                                type="Transparent"
                            >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                                <customData>
                                    <core:CustomData
                                        key="target"
                                        value="resolutionCreate"
                                    />
                                    <core:CustomData
                                        key="actionSource"
                                        value="LandingPage"
                                    />
                                </customData>
                            </Button>
                            <Button
                                icon="sap-icon://edit"
                                press="editDraftRequest"
                                tooltip="Edit Draft"
                                visible="{RequestorInfo>isDeleteVisible}"
                            >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                                <customData>
                                    <core:CustomData
                                        key="target"
                                        value="resolutionCreate"
                                    />
                                    <core:CustomData
                                        key="actionSource"
                                        value="LandingPage"
                                    />
                                </customData>
                            </Button>
                            <Button
                                icon="sap-icon://delete"
                                press="deleteDraftRequest"
                                tooltip="Delete Draft"
                                visible="{RequestorInfo>isDeleteVisible}"
                            >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                                <customData>
                                    <!--<core:CustomData key="target" value="resolutionCreate"/>-->
                                    <core:CustomData
                                        key="actionSource"
                                        value="LandingPage"
                                    />
                                </customData>
                            </Button>
                            <Button
                                icon="sap-icon://sys-cancel-2"
                                press="onPressCancelRequest"
                                tooltip="Cancel Request"
                                visible="{RequestorInfo>cancelVisible}"
                            />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

            <footer>
                <OverflowToolbar>
                    <ToolbarSpacer />
                    <Button
                        icon="sap-icon://write-new"
                        press="onPressCreateNewRequest"
                        text="Create Service Request"
                        type="Emphasized"
                    />
                </OverflowToolbar>
            </footer>
        </Page>
        <Page
            id="resolutionCreate"
            title="{i18n>UserProfile.Page.Title}"
            busy="{EmployeeData>/isBusy}"
        >
            <customHeader>
                <Toolbar>
                    <Button
                        icon="sap-icon://nav-back"
                        press="onPressBack"
                    />
                    <ToolbarSpacer />
                    <Image
                        class="imageCss sapUiSmallMarginEnd"
                        densityAware="false"
                    />
                </Toolbar>
            </customHeader>
            <content>
                <core:Fragment
                    fragmentName="com.stengg.btp.ptpui.view.fragments.ResolutionCreate"
                    type="XML"
                />
                <core:Fragment
                    fragmentName="com.stengg.btp.ptpui.view.fragments.MessagePopOver"
                    type="XML"
                />
            </content>
            <footer>
                <OverflowToolbar>
                    <Button
                        id="MsgalrtBtn"
                        text="{BillingReq>/popOverText}"
                        icon="sap-icon://message-popup"
                        press="showMessageLogPopover"
                        type="Emphasized"
                    />
                    <ToolbarSpacer />
                    <!--<Button icon="sap-icon://decline" press="onPressCancelRequest" text="Cancel" type="Default"/>-->
                    <Button
                        icon="sap-icon://decline"
                        press="onPressBack"
                        text="Cancel"
                        type="Default"
                    />
                    <Button
                        icon="sap-icon://save"
                        press="onPressSaveServiceRequest"
                        text="Save"
                        type="Default"
                        visible="{oReadOnlyModel>/isSaveSubmitVisible}"
                    />
                    <Button
                        icon="sap-icon://activate"
                        press="onPressSubmit"
                        text="Submit"
                        type="Default"
                        visible="{oReadOnlyModel>/isSaveSubmitVisible}"
                    />
                    <Button
                        icon="sap-icon://action"
                        press="onPressSubmit"
                        text="Open Case"
                        type="Default"
                        visible="{oReadOnlyModel>/isCloseCaseVisible}"
                    >
                        <layoutData>
                            <FlexItemData growFactor="1" />
                        </layoutData>
                        <customData>
                            <core:CustomData
                                key="target"
                                value="LandingPage"
                            />
                            <core:CustomData
                                key="actionSource"
                                value="Reopen Case"
                            />
                        </customData>
                    </Button>
                    <Button
                        icon="sap-icon://activate"
                        press="onPressSubmit"
                        text="Close Case"
                        type="Default"
                        visible="{oReadOnlyModel>/isCloseCaseVisible}"
                    >
                        <layoutData>
                            <FlexItemData growFactor="1" />
                        </layoutData>
                        <customData>
                            <core:CustomData
                                key="target"
                                value="LandingPage"
                            />
                            <core:CustomData
                                key="actionSource"
                                value="Close Case"
                            />
                        </customData>
                    </Button>
                </OverflowToolbar>
            </footer>
        </Page>
        <Page
            id="resolutionDisplay"
            title="{i18n>UserProfile.Page.Title}"
            busy="{EmployeeData>/isBusy}"
        >
            <customHeader>
                <Toolbar>
                    <Button
                        icon="sap-icon://nav-back"
                        press="onPressBack"
                    />
                    <ToolbarSpacer />
                    <Image
                        class="imageCss sapUiSmallMarginEnd"
                        densityAware="false"
                    />
                </Toolbar>
            </customHeader>
            <content>
                <core:Fragment
                    fragmentName="com.stengg.btp.ptpui.view.fragments.ResolutionDisplay"
                    type="XML"
                />
            </content>
            <footer>
                <OverflowToolbar>
                    <ToolbarSpacer />
                    <Button
                        icon="sap-icon://nav-back"
                        press="onPressBackFromDisplay"
                        text="Back"
                        type="Default"
                    />
                </OverflowToolbar>
            </footer>
        </Page>
        <Page
            id="ServiceRatingPage"
            title="{i18n>UserProfile.Page.Title}"
            busy="{EmployeeData>/isBusy}"
        >
            <customHeader>
                <Toolbar>
                    <Button
                        icon="sap-icon://nav-back"
                        press="onPressBack"
                    />
                    <ToolbarSpacer />
                    <Image
                        class="imageCss sapUiSmallMarginEnd"
                        densityAware="false"
                    />
                </Toolbar>
            </customHeader>
            <content>
                <core:Fragment
                    fragmentName="com.stengg.btp.ptpui.view.fragments.ServiceRatingPage"
                    type="XML"
                />
            </content>
            <footer>
                <OverflowToolbar>
                    <Button
                        id="MsgalrtBtnq1"
                        text="{BillingReq>/popOverText}"
                        icon="sap-icon://message-popup"
                        press="showMessageLogPopover"
                        type="Emphasized"
                    />
                    <ToolbarSpacer />
                    <Button
                        id="showMsgeBtnId3"
                        icon="sap-icon://decline"
                        press="onPressBack"
                        text="Cancel"
                        type="Default"
                    />
                    <Button
                        id="showMsgeBtnId4"
                        icon="sap-icon://save"
                        press="onPressSaveNotificationRequest"
                        text="Save"
                        type="Default"
                    />
                    <Button
                        id="showMsgeBtnId5"
                        icon="sap-icon://activate"
                        press="onPressSubmit"
                        text="Submit"
                        type="Default"
                    />
                </OverflowToolbar>
            </footer>
        </Page>
        <Page
            id="ApprovalPage"
            title="{i18n>UserProfile.Page.Title}"
            busy="{EmployeeData>/isBusy}"
        >
            <customHeader>
                <Toolbar>
                    <Button
                        icon="sap-icon://nav-back"
                        press="onPressBack"
                    />
                    <ToolbarSpacer />
                    <Image
                        class="imageCss sapUiSmallMarginEnd"
                        densityAware="false"
                    />
                </Toolbar>
            </customHeader>
            <content>
                <core:Fragment
                    fragmentName="com.stengg.btp.ptpui.view.fragments.ResolutionApproval"
                    type="XML"
                />
            </content>
            <footer>
                <OverflowToolbar>
                    <Button
                        id="MsgalrtBtn1"
                        text="{BillingReq>/popOverText}"
                        icon="sap-icon://message-popup"
                        press="onPressShowMessage"
                        type="Emphasized"
                    />
                    <Button
                        text="More.."
                        icon="sap-icon://SAP-icons-TNT/more"
                        press="handleOpen"
                    />
                    <ToolbarSpacer />
                    <!--<Button icon="sap-icon://decline" press="onPressCancelRequest" text="Cancel" type="Default"/>-->
                    <Button
                        press="onPressSubmit"
                        icon="sap-icon://complete"
                        text="Resolved"
                        type="Accept"
                        visible="true"
                    />
                    <Button
                        press="closeRequestDisplayDialog"
                        icon="sap-icon://decline"
                        type="Reject"
                        text="Close"
                    />
                </OverflowToolbar>
            </footer>
        </Page>
    </NavContainer>
</mvc:View>
